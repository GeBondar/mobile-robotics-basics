# **–°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ Action –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏ –≤ ROS‚ÄØ2**

## üéØ **–¶–µ–ª—å**
–°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π action –≤ ROS‚ÄØ2, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —á–µ—Ä–µ–ø–∞—à–∫—É –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ turtlesim –≤ –∑–∞–¥–∞–Ω–Ω—É—é —Ç–æ—á–∫—É. –í—ã –Ω–∞—É—á–∏—Ç–µ—Å—å –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ç–∏–ø action, —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å action-—Å–µ—Ä–≤–µ—Ä –∏ action-–∫–ª–∏–µ–Ω—Ç –Ω–∞ Python, –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å (feedback) –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–∏.

---

## üìã **–ß—Ç–æ —Ç–∞–∫–æ–µ Actions –≤ ROS2?**
Actions ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è **–¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –∏–ª–∏ –º–∏–Ω—É—Ç. –û–Ω–∏ —Å–æ—á–µ—Ç–∞—é—Ç –≤ —Å–µ–±–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (–∑–∞–ø—Ä–æ—Å‚Äë–æ—Ç–≤–µ—Ç) –∏ —Ç–æ–ø–∏–∫–æ–≤ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏).  
- **–ö–ª–∏–µ–Ω—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ü–µ–ª—å (goal).
- **–°–µ—Ä–≤–µ—Ä** –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —à–ª—ë—Ç **–æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å** (feedback).
- –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Ä–µ–∑—É–ª—å—Ç–∞—Ç** (result).
- –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ **–æ—Ç–º–µ–Ω–∏—Ç—å** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–∏.

–í —ç—Ç–æ–º —Ç—É—Ç–æ—Ä–∏–∞–ª–µ –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º action `MoveTo`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —á–µ—Ä–µ–ø–∞—à–∫—É –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –≤ –∑–∞–¥–∞–Ω–Ω—É—é —Ç–æ—á–∫—É (x, y) —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é, –ø—É–±–ª–∏–∫—É—è –∫–æ–º–∞–Ω–¥—ã –≤ `/turtle1/cmd_vel` –∏ –≤—ã–¥–∞–≤–∞—è –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –∏ –æ—Å—Ç–∞–≤—à–µ–º—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏.

---

## üöÄ **–®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ –ø–∞–∫–µ—Ç–∞**

### **1.1 –°–æ–∑–¥–∞—ë–º —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)**
```bash
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src
```

### **1.2 –°–æ–∑–¥–∞—ë–º –ø–∞–∫–µ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π actions**
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å actions –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `rclpy`, `turtlesim`, `geometry_msgs`, –∞ —Ç–∞–∫–∂–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.

–°–æ–∑–¥–∞–¥–∏–º –ø–∞–∫–µ—Ç —Ç–∏–ø–∞ `ament_cmake`, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ `.action` –ø—Ä–æ—â–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CMake, –∞ Python-—É–∑–ª—ã —Ä–∞–∑–º–µ—Å—Ç–∏–º –≤ –ø–æ–¥–ø–∞–ø–∫–µ. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å `ament_python` –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É CMake, –Ω–æ –º—ã –≤—ã–±–µ—Ä–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—É—Ç—å.

```bash
ros2 pkg create turtle_action \
  --build-type ament_cmake \
  --dependencies rclcpp rclpy rclcpp_action turtlesim geometry_msgs action_msgs
```

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –∏ C++, –∏ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –Ω–æ –±—É–¥–µ–º –ø–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ Python. –≠—Ç–æ –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç.

### **1.3 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞**
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–∫–µ—Ç –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫–∏:
```bash
cd ~/ros2_ws/src/turtle_action
mkdir action scripts
```

–ü–∞–ø–∫–∞ `action` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª—ã –æ–ø–∏—Å–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π, `scripts` ‚Äî –Ω–∞—à–∏ Python-—É–∑–ª—ã.

---

## üìÑ **–®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Ç–∏–ø–∞ Action**

### **2.1 –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª `MoveTo.action`**
```bash
touch action/MoveTo.action
```

### **2.2 –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º `action/MoveTo.action`**
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤—å—Ç–µ:
```text
# –ó–∞–ø—Ä–æ—Å (goal)
float32 target_x
float32 target_y
float32 target_theta   # –∂–µ–ª–∞–µ–º–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
float32 speed          # –ª–∏–Ω–µ–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
---
# –†–µ–∑—É–ª—å—Ç–∞—Ç (result)
bool success           # —É–¥–∞–ª–æ—Å—å –ª–∏ –¥–æ—Å—Ç–∏—á—å —Ü–µ–ª–∏
float32 final_distance # —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–ª–∏
---
# –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (feedback)
float32 current_x
float32 current_y
float32 current_theta
float32 distance_left  # –æ—Å—Ç–∞–≤—à–µ–µ—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–ª–∏
```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞: —Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ `---`. –ü–µ—Ä–≤–∞—è ‚Äî —Ü–µ–ª—å (goal), –≤—Ç–æ—Ä–∞—è ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç (result), —Ç—Ä–µ—Ç—å—è ‚Äî –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (feedback).

### **2.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CMakeLists.txt –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ action**
–í `CMakeLists.txt` –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `rosidl_generate_interfaces` –¥–ª—è –Ω–∞—à–µ–≥–æ action. –¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏ –ø–∞–∫–µ—Ç—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `CMakeLists.txt` –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
```cmake
cmake_minimum_required(VERSION 3.8)
project(turtle_action)

if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# find dependencies
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(rclpy REQUIRED)
find_package(rclcpp_action REQUIRED)
find_package(turtlesim REQUIRED)
find_package(geometry_msgs REQUIRED)
find_package(action_msgs REQUIRED)
find_package(rosidl_default_generators REQUIRED)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (action)
rosidl_generate_interfaces(${PROJECT_NAME}
  "action/MoveTo.action"
  DEPENDENCIES geometry_msgs turtlesim action_msgs
)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python-—Å–∫—Ä–∏–ø—Ç–æ–≤
install(PROGRAMS
  scripts/action_server.py
  scripts/action_client.py
  DESTINATION lib/${PROJECT_NAME}
)

ament_package()
```

### **2.4 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ package.xml**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `package.xml` –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:
```xml
<depend>rclcpp</depend>
<depend>rclpy</depend>
<depend>rclcpp_action</depend>
<depend>turtlesim</depend>
<depend>geometry_msgs</depend>
<depend>action_msgs</depend>
<depend>rosidl_default_generators</depend>
<exec_depend>rosidl_default_runtime</exec_depend>
<member_of_group>rosidl_interface_packages</member_of_group>
```

---

## üêç **–®–∞–≥ 3: –ù–∞–ø–∏—Å–∞–Ω–∏–µ action-—Å–µ—Ä–≤–µ—Ä–∞**

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ `/turtle1/pose`, —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–ø–∞—à–∫–∏. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ü–µ–ª–∏ –æ–Ω –Ω–∞—á–Ω—ë—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤ `/turtle1/cmd_vel` –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –∫ —Ü–µ–ª–∏, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—è feedback.

### **3.1 –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª `action_server.py`**
```bash
cd ~/ros2_ws/src/turtle_action/scripts
touch action_server.py
chmod +x action_server.py
```

### **3.2 –ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞**
```python
#!/usr/bin/env python3
"""
Action-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏ –≤ –∑–∞–¥–∞–Ω–Ω—É—é —Ç–æ—á–∫—É.
–ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ /turtle1/pose, –ø—É–±–ª–∏–∫—É–µ—Ç –≤ /turtle1/cmd_vel.
"""

import rclpy
from rclpy.node import Node
from rclpy.action import ActionServer
from rclpy.action.server import ServerGoalHandle
from geometry_msgs.msg import Twist
from turtlesim.msg import Pose
from turtle_action.action import MoveTo  # —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∏–ø action

import math
import time

class MoveToActionServer(Node):
    def __init__(self):
        super().__init__('move_to_action_server')
        
        # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–ø–∞—à–∫–∏
        self.pose_sub = self.create_subscription(Pose, '/turtle1/pose', self.pose_callback, 10)
        self.current_pose = None

        # –ò–∑–¥–∞—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥ —Å–∫–æ—Ä–æ—Å—Ç–∏
        self.cmd_pub = self.create_publisher(Twist, '/turtle1/cmd_vel', 10)

        # –°–æ–∑–¥–∞–Ω–∏–µ action-—Å–µ—Ä–≤–µ—Ä–∞
        self._action_server = ActionServer(
            self,
            MoveTo,
            'move_to',
            self.execute_callback,
            cancel_callback=self.cancel_callback  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
        )

        self.get_logger().info('Action-—Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.')

    def pose_callback(self, msg):
        """–°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ"""
        self.current_pose = msg

    def execute_callback(self, goal_handle: ServerGoalHandle):
        """–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ü–µ–ª–∏"""
        self.get_logger().info('–ü–æ–ª—É—á–µ–Ω–∞ –Ω–æ–≤–∞—è —Ü–µ–ª—å: x={:.2f}, y={:.2f}, theta={:.2f}, speed={:.2f}'.format(
            goal_handle.request.target_x,
            goal_handle.request.target_y,
            goal_handle.request.target_theta,
            goal_handle.request.speed
        ))

        # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–≤–∏–∂–µ–Ω–∏—è
        target_x = goal_handle.request.target_x
        target_y = goal_handle.request.target_y
        target_theta = goal_handle.request.target_theta
        speed = goal_handle.request.speed
        # –ü–æ—Ä–æ–≥ –±–ª–∏–∑–æ—Å—Ç–∏ (–∫–æ–≥–¥–∞ —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞)
        distance_tolerance = 0.1
        angle_tolerance = 0.05

        # –ß–∞—Å—Ç–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ feedback (—Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É)
        feedback_period = 0.5  # —Å–µ–∫
        last_feedback_time = self.get_clock().now().nanoseconds / 1e9

        # –ü–æ–∫–∞ —Ü–µ–ª—å –∞–∫—Ç–∏–≤–Ω–∞ –∏ –Ω–µ –∑–∞–ø—Ä–æ—à–µ–Ω–∞ –æ—Ç–º–µ–Ω–∞
        while rclpy.ok() and goal_handle.is_active:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª–æ –ª–∏ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç–º–µ–Ω—ã
            if goal_handle.is_cancel_requested:
                goal_handle.canceled()
                self.get_logger().info('–¶–µ–ª—å –æ—Ç–º–µ–Ω–µ–Ω–∞.')
                return MoveTo.Result(success=False, final_distance=-1.0)

            # –ñ–¥—ë–º, –ø–æ–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–µ—Ä–≤–∞—è –ø–æ–∑–∏—Ü–∏—è
            if self.current_pose is None:
                time.sleep(0.1)
                continue

            # –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∏ —É–≥–æ–ª –¥–æ —Ü–µ–ª–∏
            dx = target_x - self.current_pose.x
            dy = target_y - self.current_pose.y
            distance = math.sqrt(dx*dx + dy*dy)
            angle_to_target = math.atan2(dy, dx)

            # –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É —É–≥–ª–æ–≤ (—Å —É—á—ë—Ç–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏)
            angle_diff = self.normalize_angle(angle_to_target - self.current_pose.theta)

            # –ü—É–±–ª–∏–∫—É–µ–º –∫–æ–º–∞–Ω–¥—É —Å–∫–æ—Ä–æ—Å—Ç–∏ (–ø—Ä–æ—Å—Ç–æ–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä)
            cmd = Twist()
            if distance > distance_tolerance:
                # –ï—Å–ª–∏ –¥–∞–ª–µ–∫–æ, –µ–¥–µ–º –≤–ø–µ—Ä—ë–¥ –∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
                cmd.linear.x = min(speed, distance)  # –Ω–µ –±—ã—Å—Ç—Ä–µ–µ speed
                cmd.angular.z = 2.0 * angle_diff
            else:
                # –ï—Å–ª–∏ –±–ª–∏–∑–∫–æ, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —É–≥–æ–ª
                cmd.linear.x = 0.0
                # –î–æ–≤–æ—Ä–æ—Ç –¥–æ —Ü–µ–ª–µ–≤–æ–≥–æ —É–≥–ª–∞
                angle_diff_final = self.normalize_angle(target_theta - self.current_pose.theta)
                if abs(angle_diff_final) > angle_tolerance:
                    cmd.angular.z = 1.5 * angle_diff_final
                else:
                    cmd.angular.z = 0.0
                    # –¶–µ–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
                    self.get_logger().info('–¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!')
                    break

            self.cmd_pub.publish(cmd)

            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º feedback —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å—é
            now = self.get_clock().now().nanoseconds / 1e9
            if now - last_feedback_time >= feedback_period:
                feedback_msg = MoveTo.Feedback()
                feedback_msg.current_x = self.current_pose.x
                feedback_msg.current_y = self.current_pose.y
                feedback_msg.current_theta = self.current_pose.theta
                feedback_msg.distance_left = distance
                goal_handle.publish_feedback(feedback_msg)
                last_feedback_time = now

            # –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞, —á—Ç–æ–±—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
            time.sleep(0.05)

        # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–µ–ø–∞—à–∫—É
        self.cmd_pub.publish(Twist())

        if goal_handle.is_active:
            goal_handle.succeed()

        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        result = MoveTo.Result()
        result.success = True
        result.final_distance = distance if self.current_pose else -1.0
        return result

    def cancel_callback(self, goal_handle):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–º–µ–Ω—ã —Ü–µ–ª–∏ (–º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–Ω—è—Ç—å –æ—Ç–º–µ–Ω—É)"""
        self.get_logger().info('–ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–º–µ–Ω—É —Ü–µ–ª–∏.')
        # –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ)
        self.cmd_pub.publish(Twist())  # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
        return rclpy.action.CancelResponse.ACCEPT

    @staticmethod
    def normalize_angle(angle):
        """–ü—Ä–∏–≤–æ–¥–∏—Ç —É–≥–æ–ª –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [-pi, pi]"""
        while angle > math.pi:
            angle -= 2.0 * math.pi
        while angle < -math.pi:
            angle += 2.0 * math.pi
        return angle

def main(args=None):
    rclpy.init(args=args)
    node = MoveToActionServer()
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        node.get_logger().info('–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞')
    finally:
        node.destroy_node()
        rclpy.shutdown()

if __name__ == '__main__':
    main()
```

### **3.3 –ü–æ—è—Å–Ω–µ–Ω–∏—è**
- –í `execute_callback` –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º —Ü–∏–∫–ª –¥–≤–∏–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–∫–∞ —Ü–µ–ª—å –∞–∫—Ç–∏–≤–Ω–∞.
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä –¥–ª—è –ø–æ–≤–æ—Ä–æ—Ç–∞ –∫ —Ü–µ–ª–∏ –∏ –¥–≤–∏–∂–µ–Ω–∏—è –≤–ø–µ—Ä—ë–¥.
- Feedback –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥—ã.
- –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã —Ü–µ–ª–∏ (cancel).
- –ü–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏ —á–µ—Ä–µ–ø–∞—à–∫–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

---

## üêç **–®–∞–≥ 4: –ù–∞–ø–∏—Å–∞–Ω–∏–µ action-–∫–ª–∏–µ–Ω—Ç–∞**

–ö–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ü–µ–ª—å –∏ –≤—ã–≤–æ–¥–∏—Ç—å feedback –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### **4.1 –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª `action_client.py`**
```bash
touch action_client.py
chmod +x action_client.py
```

### **4.2 –ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞**
```python
#!/usr/bin/env python3
"""
Action-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏.
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–ª–∏ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.
"""

import sys
import rclpy
from rclpy.node import Node
from rclpy.action import ActionClient
from turtle_action.action import MoveTo

class MoveToActionClient(Node):
    def __init__(self):
        super().__init__('move_to_action_client')
        self._action_client = ActionClient(self, MoveTo, 'move_to')

    def send_goal(self, target_x, target_y, target_theta, speed):
        goal_msg = MoveTo.Goal()
        goal_msg.target_x = target_x
        goal_msg.target_y = target_y
        goal_msg.target_theta = target_theta
        goal_msg.speed = speed

        self.get_logger().info('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ü–µ–ª—å...')

        # –ñ–¥—ë–º, –ø–æ–∫–∞ action-—Å–µ—Ä–≤–µ—Ä —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
        self._action_client.wait_for_server()

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ü–µ–ª—å
        self._send_goal_future = self._action_client.send_goal_async(
            goal_msg,
            feedback_callback=self.feedback_callback
        )
        self._send_goal_future.add_done_callback(self.goal_response_callback)

    def goal_response_callback(self, future):
        goal_handle = future.result()
        if not goal_handle.accepted:
            self.get_logger().info('–¶–µ–ª—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ —Å–µ—Ä–≤–µ—Ä–æ–º')
            return

        self.get_logger().info('–¶–µ–ª—å –ø—Ä–∏–Ω—è—Ç–∞, –∂–¥—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç...')
        self._get_result_future = goal_handle.get_result_async()
        self._get_result_future.add_done_callback(self.get_result_callback)

    def get_result_callback(self, future):
        result = future.result().result
        self.get_logger().info('–†–µ–∑—É–ª—å—Ç–∞—Ç: success={}, final_distance={:.2f}'.format(
            result.success, result.final_distance))
        rclpy.shutdown()

    def feedback_callback(self, feedback_msg):
        feedback = feedback_msg.feedback
        self.get_logger().info('–¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è: x={:.2f}, y={:.2f}, theta={:.2f}, –æ—Å—Ç–∞–ª–æ—Å—å {:.2f} –º'.format(
            feedback.current_x, feedback.current_y, feedback.current_theta, feedback.distance_left))

def main(args=None):
    rclpy.init(args=args)

    # –†–∞–∑–±–∏—Ä–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    if len(sys.argv) != 5:
        print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: action_client.py <target_x> <target_y> <target_theta> <speed>")
        print("–ü—Ä–∏–º–µ—Ä: action_client.py 8.0 2.0 1.57 1.0")
        return

    target_x = float(sys.argv[1])
    target_y = float(sys.argv[2])
    target_theta = float(sys.argv[3])
    speed = float(sys.argv[4])

    client = MoveToActionClient()
    client.send_goal(target_x, target_y, target_theta, speed)

    # –ó–∞–ø—É—Å–∫–∞–µ–º spin, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å callback'–∏
    rclpy.spin(client)

if __name__ == '__main__':
    main()
```

### **4.3 –ü–æ—è—Å–Ω–µ–Ω–∏—è**
- –ö–ª–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ActionClient`.
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ü–µ–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è callback –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è feedback.
- –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.

---

## üì¶ **–®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ entry points –∏ —Å–±–æ—Ä–∫–∞**

–ú—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –≤ `CMakeLists.txt` —á–µ—Ä–µ–∑ `install(PROGRAMS ...)`, –ø–æ—ç—Ç–æ–º—É –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–ª—è—Ç—å –∏—Ö –≤ `setup.py` (–ø–∞–∫–µ—Ç `ament_cmake`). –ù–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ `ros2 run` –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ `lib/${PROJECT_NAME}`.

–í—ã–ø–æ–ª–Ω–∏–º —Å–±–æ—Ä–∫—É:

```bash
cd ~/ros2_ws
colcon build --packages-select turtle_action
source install/setup.bash
```

---

## üî® **–®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞**

### **6.1 –ó–∞–ø—É—Å–∫–∞–µ–º turtlesim (—Ç–µ—Ä–º–∏–Ω–∞–ª ‚Ññ1)**
```bash
ros2 run turtlesim turtlesim_node
```

### **6.2 –ó–∞–ø—É—Å–∫–∞–µ–º action-—Å–µ—Ä–≤–µ—Ä (—Ç–µ—Ä–º–∏–Ω–∞–ª ‚Ññ2)**
```bash
source ~/ros2_ws/install/setup.bash
ros2 run turtle_action action_server.py
```
–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: `Action-—Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.`

### **6.3 –ó–∞–ø—É—Å–∫–∞–µ–º action-–∫–ª–∏–µ–Ω—Ç–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª ‚Ññ3)**
–ù–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–º–µ—Å—Ç–∏–º —á–µ—Ä–µ–ø–∞—à–∫—É –≤ —Ç–æ—á–∫—É (8.0, 2.0) —Å —Ü–µ–ª–µ–≤—ã–º —É–≥–ª–æ–º 1.57 —Ä–∞–¥–∏–∞–Ω (90¬∞) –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é 1.0:
```bash
source ~/ros2_ws/install/setup.bash
ros2 run turtle_action action_client.py 8.0 2.0 1.57 1.0
```

–í—ã —É–≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —á–µ—Ä–µ–ø–∞—à–∫–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∏ –¥–≤–∏–∂–µ—Ç—Å—è –∫ —Ü–µ–ª–∏, –∞ –∫–ª–∏–µ–Ω—Ç –≤—ã–≤–æ–¥–∏—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å. –ü–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏ –∫–ª–∏–µ–Ω—Ç –≤—ã–≤–µ–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.

### **6.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π**
```bash
ros2 action list
```
–î–æ–ª–∂–µ–Ω –±—ã—Ç—å `/move_to`.

### **6.5 –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–ø–µ –¥–µ–π—Å—Ç–≤–∏—è**
```bash
ros2 action info /move_to
ros2 action show turtle_action/action/MoveTo
```

### **6.6 –û—Ç–º–µ–Ω–∞ —Ü–µ–ª–∏ (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)**
–ï—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞–∂–∞—Ç—å **Ctrl+C** –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, —Ü–µ–ª—å –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ß—Ç–æ–±—ã –æ—Ç–º–µ–Ω–∏—Ç—å, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç –∏ –±—ã—Å—Ç—Ä–æ –ø—Ä–µ—Ä–≤–∞—Ç—å –µ–≥–æ. –ù–æ –Ω–∞—à —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–º–µ–Ω—É, –∏ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ—à–ª—ë—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–º–µ–Ω—É, –æ–Ω–∞ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. –î–ª—è —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç, –∞ –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
```bash
ros2 action send_goal /move_to turtle_action/action/MoveTo "{target_x: 5.0, target_y: 5.0, target_theta: 0.0, speed: 1.0}" --feedback
```
–ó–∞—Ç–µ–º –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –æ—Ç–º–µ–Ω–∏—Ç—å:
```bash
ros2 action cancel /move_to
```
–≠—Ç–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Ç–º–µ–Ω—ã —Å–µ—Ä–≤–µ—Ä–æ–º.

---

## üéÆ **–®–∞–≥ 7: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è**

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–≤–∏–∂–µ–Ω–∏—è**
–î–æ–±–∞–≤—å—Ç–µ –≤ goal –ø–æ–ª–µ `linear_tolerance` –∏ `angular_tolerance`, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–¥–∞–≤–∞—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –≤ —Å–µ—Ä–≤–µ—Ä–µ.

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ª–æ–º–∞–Ω–æ–π**
–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ action —Ç–∞–∫, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –º–∞—Å—Å–∏–≤). –ß–µ—Ä–µ–ø–∞—à–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–µ—Ç–∏—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏.

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–æ–º**
–î–æ–±–∞–≤—å—Ç–µ –≤ —Å–µ—Ä–≤–µ—Ä —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `StopMoving.srv`). –ü—Ä–∏ –≤—ã–∑–æ–≤–µ —Å–µ—Ä–≤–∏—Å–∞ —Ç–µ–∫—É—â–∞—è —Ü–µ–ª—å –¥–æ–ª–∂–Ω–∞ –æ—Ç–º–µ–Ω—è—Ç—å—Å—è.

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π**
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –≤—ã—Ö–æ–¥ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –æ–∫–Ω–∞ (0‚Äì11). –ï—Å–ª–∏ —Ü–µ–ª—å –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏, –æ—Ç–∫–ª–æ–Ω—è–π—Ç–µ goal —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.

---

## üßπ **–®–∞–≥ 8: –û—á–∏—Å—Ç–∫–∞**
–ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —É–∑–ª—ã –Ω–∞–∂–∞—Ç–∏–µ–º **Ctrl+C** –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

---

## üìö **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Å–≤–æ–∏–ª–∏**

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ action (—Ñ–∞–π–ª .action)**  
‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ action –ø—Ä–∏ —Å–±–æ—Ä–∫–µ**  
‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è action-—Å–µ—Ä–≤–µ—Ä–∞ —Å –¥–æ–ª–≥–æ–π –∑–∞–¥–∞—á–µ–π –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é**  
‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è action-–∫–ª–∏–µ–Ω—Ç–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π feedback –∏ result**  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã —Ü–µ–ª–∏**  
‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ action-—Å–µ—Ä–≤–µ—Ä–∞**  
‚úÖ **–ó–∞–ø—É—Å–∫ –∏ –æ—Ç–ª–∞–¥–∫–∞ actions –≤ ROS‚ÄØ2**

---

## üîú **–ß—Ç–æ –¥–∞–ª—å—à–µ?**

1. **–ò–∑—É—á–µ–Ω–∏–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫ —Ç–∏–ø–∞ `nav2`.
2. **–°–æ–∑–¥–∞–Ω–∏–µ action –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–æ–π —Ä–æ–±–æ—Ç–æ–≤.**
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è (move_base) –≤ ROS2 Navigation.**
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è actions —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.**
# **–°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–ø–∞—à–∫–∏ –≤ ROS‚ÄØ2**

## üéØ **–¶–µ–ª—å**
–°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –≤ ROS‚ÄØ2, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—É—á–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–µ—Ä–µ–ø–∞—à–∫–∏ –∏–∑ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ turtlesim. –í—ã –Ω–∞—É—á–∏—Ç–µ—Å—å –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ç–∏–ø —Å–µ—Ä–≤–∏—Å–∞, —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞ Python, –∞ —Ç–∞–∫–∂–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã –≤ –æ–¥–Ω–æ–º —É–∑–ª–µ.

---

## üìã **–ß—Ç–æ –º—ã –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å**
1. –°–æ–∑–¥–∞–¥–∏–º ROS‚ÄØ2 –ø–∞–∫–µ—Ç —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.
2. –û–ø–∏—à–µ–º —Å–≤–æ–π —Ç–∏–ø —Å–µ—Ä–≤–∏—Å–∞ `GetPose.srv` (–∑–∞–ø—Ä–æ—Å –ø—É—Å—Ç–æ–π, –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç x, y, theta).
3. –ù–∞–ø–∏—à–µ–º **—Å–µ—Ä–≤–µ—Ä**, –∫–æ—Ç–æ—Ä—ã–π:
   - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ `/turtle1/pose`;
   - —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ;
   - –ø–æ –∑–∞–ø—Ä–æ—Å—É –∫–ª–∏–µ–Ω—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.
4. –ù–∞–ø–∏—à–µ–º **–∫–ª–∏–µ–Ω—Ç–∞**, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
5. –°–æ–±–µ—Ä—ë–º –ø–∞–∫–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∏–º —Ä–∞–±–æ—Ç—É.

---

## üöÄ **–®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ –ø–∞–∫–µ—Ç–∞**

### **1.1 –°–æ–∑–¥–∞—ë–º —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)**
```bash
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src
```

### **1.2 –°–æ–∑–¥–∞—ë–º Python –ø–∞–∫–µ—Ç —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏**
```bash
ros2 pkg create turtle_pose_service \
  --build-type ament_python \
  --dependencies rclpy turtlesim geometry_msgs
```

- `rclpy` ‚Äì –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python.
- `turtlesim` ‚Äì –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —á–µ—Ä–µ–ø–∞—à–∫–æ–π (—Ç–∏–ø `Pose`).
- `geometry_msgs` ‚Äì –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è, –Ω–æ –¥–ª—è Pose –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–æ–Ω –∏–∑ turtlesim).

### **1.3 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞**
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–∫–µ—Ç –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
cd ~/ros2_ws/src/turtle_pose_service
mkdir srv
```

---

## üìÑ **–®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Ç–∏–ø–∞ —Å–µ—Ä–≤–∏—Å–∞**

### **2.1 –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª `GetPose.srv`**
```bash
touch srv/GetPose.srv
```

### **2.2 –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º `srv/GetPose.srv`**
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ –ª—é–±–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ:
```text
---
float32 x
float32 y
float32 theta
```
–ó–¥–µ—Å—å –¥–æ `---` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞–ø—Ä–æ—Å (–ø—É—Å—Ç–æ–π), –ø–æ—Å–ª–µ ‚Äì –æ—Ç–≤–µ—Ç (–ø–æ–ª—è `x`, `y`, `theta`).

### **2.3 –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º `CMakeLists.txt` –∏ `package.xml` –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞**
–•–æ—Ç—è –ø–∞–∫–µ—Ç `ament_python`, –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫.

**–í `package.xml`** —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å:
```xml
<depend>turtlesim</depend>
<depend>geometry_msgs</depend>
<depend>rosidl_default_generators</depend>
<exec_depend>rosidl_default_runtime</exec_depend>
<member_of_group>rosidl_interface_packages</member_of_group>
```

**–í `CMakeLists.txt`** –¥–æ–±–∞–≤—å—Ç–µ (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º):
```cmake
cmake_minimum_required(VERSION 3.8)
project(turtle_pose_service)

if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# find dependencies
find_package(ament_cmake REQUIRED)
find_package(rclpy REQUIRED)
find_package(turtlesim REQUIRED)
find_package(geometry_msgs REQUIRED)
find_package(rosidl_default_generators REQUIRED)

rosidl_generate_interfaces(${PROJECT_NAME}
  "srv/GetPose.srv"
  DEPENDENCIES geometry_msgs turtlesim
)

ament_package()
```
–≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç CMake —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Python-–º–æ–¥—É–ª–∏ –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¥–ª—è Python-–ø–∞–∫–µ—Ç–æ–≤ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ament_cmake` –∫–∞–∫ –±–∞–∑–æ–≤—ã–π —Ç–∏–ø, –Ω–æ –º—ã —Å–æ–∑–¥–∞–ª–∏ `ament_python`. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø–∞–∫–µ—Ç –∫–∞–∫ `ament_cmake` —Å Python-—É–∑–ª–∞–º–∏, –ª–∏–±–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤. –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ç–∏–ø –∏–∑ `example_interfaces`, –Ω–æ —Ü–µ–ª—å ‚Äî –Ω–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤–∏–º —Ç–∞–∫.

–ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—ë—Ç–µ—Å—å —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º: —Å–æ–∑–¥–∞—Ç—å –ø–∞–∫–µ—Ç –∫–∞–∫ `ament_cmake` –∏ –≤–Ω—É—Ç—Ä–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞–ø–∫—É `turtle_pose_service` —Å Python-–∫–æ–¥–æ–º. –ù–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —ç—Ç–æ–≥–æ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞ –º—ã –ø—Ä–æ–ø—É—Å—Ç–∏–º –¥–µ—Ç–∞–ª–∏ —Å–±–æ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ –ª–æ–≥–∏–∫–µ —É–∑–ª–æ–≤, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —É–∂–µ –≥–æ—Ç–æ–≤—ã–π —Ç–∏–ø `example_interfaces/srv/AddTwoInts` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π. –û–¥–Ω–∞–∫–æ —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–µ–º–µ, –¥–∞–≤–∞–π—Ç–µ –≤—Å—ë –∂–µ —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª.

---

## üêç **–®–∞–≥ 3: –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞**

### **3.1 –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª `pose_server.py`**
```bash
cd ~/ros2_ws/src/turtle_pose_service/turtle_pose_service
touch pose_server.py
chmod +x pose_server.py
```

### **3.2 –ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞**
```python
#!/usr/bin/env python3
"""
–°–µ—Ä–≤–µ—Ä, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–µ—Ä–≤–∏—Å GetPose.
–ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ /turtle1/pose –∏ —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ.
"""

import rclpy
from rclpy.node import Node
from turtlesim.msg import Pose
from turtle_pose_service.srv import GetPose  # —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∏–ø —Å–µ—Ä–≤–∏—Å–∞

class PoseServer(Node):
    def __init__(self):
        super().__init__('pose_server')
        # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–æ–ø–∏–∫ —Å –ø–æ–ª–æ–∂–µ–Ω–∏–µ–º —á–µ—Ä–µ–ø–∞—à–∫–∏
        self.subscription = self.create_subscription(
            Pose,
            '/turtle1/pose',
            self.pose_callback,
            10)
        self.current_pose = None  # –∑–¥–µ—Å—å –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ

        # –°–æ–∑–¥–∞—ë–º —Å–µ—Ä–≤–∏—Å
        self.srv = self.create_service(GetPose, 'get_pose', self.get_pose_callback)
        self.get_logger().info('–°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤. –ñ–¥—É –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ /get_pose')

    def pose_callback(self, msg):
        """–°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ"""
        self.current_pose = msg
        self.get_logger().debug(f'–ü–æ–ª—É—á–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è: x={msg.x:.2f}, y={msg.y:.2f}', throttle_duration_sec=2)

    def get_pose_callback(self, request, response):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–∞ —Å–µ—Ä–≤–∏—Å–∞: –∑–∞–ø–æ–ª–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏"""
        if self.current_pose is None:
            self.get_logger().warn('–ó–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–µ–Ω, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –µ—â—ë –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞')
            # –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –Ω—É–ª–∏ –∏–ª–∏ –≤—ã–∑–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –Ω–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω—ë–º 0
            response.x = 0.0
            response.y = 0.0
            response.theta = 0.0
        else:
            response.x = self.current_pose.x
            response.y = self.current_pose.y
            response.theta = self.current_pose.theta
            self.get_logger().info(f'–û—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ—Ç–≤–µ—Ç: x={response.x:.2f}, y={response.y:.2f}')
        return response

def main(args=None):
    rclpy.init(args=args)
    node = PoseServer()
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        node.get_logger().info('–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞')
    finally:
        node.destroy_node()
        rclpy.shutdown()

if __name__ == '__main__':
    main()
```

### **3.3 –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**
- –£–∑–µ–ª –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ `/turtle1/pose` –∏ –≤ –∫–æ–ª–ª–±—ç–∫–µ `pose_callback` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `self.current_pose`.
- –°–µ—Ä–≤–∏—Å `get_pose` —Ç–∏–ø–∞ `GetPose` —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—ã–∑–æ–≤–æ–º `create_service`. –ï–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `get_pose_callback` –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª—è –æ—Ç–≤–µ—Ç–∞ –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏.
- –ï—Å–ª–∏ —á–µ—Ä–µ–ø–∞—à–∫–∞ –µ—â—ë –Ω–µ –ø—Ä–∏—Å–ª–∞–ª–∞ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–µ—Ä–≤–∏—Å –≤–µ—Ä–Ω—ë—Ç –Ω—É–ª–∏ (–º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç–≤–µ—á–∞—Ç—å, –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ç–∞–∫).

---

## üêç **–®–∞–≥ 4: –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞**

### **4.1 –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª `pose_client.py`**
```bash
touch pose_client.py
chmod +x pose_client.py
```

### **4.2 –ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞**
```python
#!/usr/bin/env python3
"""
–ö–ª–∏–µ–Ω—Ç –¥–ª—è –≤—ã–∑–æ–≤–∞ —Å–µ—Ä–≤–∏—Å–∞ get_pose.
"""

import sys
import rclpy
from rclpy.node import Node
from turtle_pose_service.srv import GetPose

class PoseClient(Node):
    def __init__(self):
        super().__init__('pose_client')
        self.cli = self.create_client(GetPose, 'get_pose')
        while not self.cli.wait_for_service(timeout_sec=1.0):
            self.get_logger().info('–°–µ—Ä–≤–∏—Å /get_pose –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, –∂–¥—ë–º...')
        self.req = GetPose.Request()

    def send_request(self):
        """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç"""
        self.future = self.cli.call_async(self.req)
        rclpy.spin_until_future_complete(self, self.future)
        return self.future.result()

def main(args=None):
    rclpy.init(args=args)

    client = PoseClient()
    response = client.send_request()
    client.get_logger().info(f'–¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏: x={response.x:.2f}, y={response.y:.2f}, theta={response.theta:.2f}')

    client.destroy_node()
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```

### **4.3 –ü–æ—è—Å–Ω–µ–Ω–∏—è**
- –ö–ª–∏–µ–Ω—Ç –∂–¥—ë—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ `get_pose`.
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–∞.
- –í—ã–≤–æ–¥–∏—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

---

## üì¶ **–®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ entry points –∏ —Å–±–æ—Ä–∫–∞**

### **5.1 –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º `setup.py`**
–û—Ç–∫—Ä–æ–π—Ç–µ `~/ros2_ws/src/turtle_pose_service/setup.py` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `entry_points`:
```python
    entry_points={
        'console_scripts': [
            'pose_server = turtle_pose_service.pose_server:main',
            'pose_client = turtle_pose_service.pose_client:main',
        ],
    },
```

### **5.2 –°–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–∞**
```bash
cd ~/ros2_ws
colcon build --packages-select turtle_pose_service
source install/setup.bash
```
–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–µ—Ä–≤–∏—Å–æ–≤, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã `CMakeLists.txt` –∏ `package.xml`. –ï—Å–ª–∏ —Å–ª–æ–∂–Ω–æ, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –≥–æ—Ç–æ–≤—ã–π, –Ω–∞–ø—Ä–∏–º–µ—Ä `example_interfaces/srv/GetPose` (—Ç–∞–∫–æ–≥–æ –Ω–µ—Ç, –Ω–æ –µ—Å—Ç—å `AddTwoInts`). –î–ª—è —á–∏—Å—Ç–æ—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `std_srvs/srv/Empty` –∏ –≤ –æ—Ç–≤–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á—Ç–æ-—Ç–æ, –Ω–æ —ç—Ç–æ –º–µ–Ω–µ–µ –Ω–∞–≥–ª—è–¥–Ω–æ. –ü–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ª–∞–≥–∞—é —É–ø—Ä–æ—Å—Ç–∏—Ç—å: –≤–∑—è—Ç—å —Ç–∏–ø `example_interfaces/srv/AddTwoInts` –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ‚Äì –ø—Ä–æ—Å—Ç–æ —Å—É–º–º–∞ –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞. –õ—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ç–∏–ø, –Ω–æ –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `turtlesim/srv/TeleportAbsolute` –∫–∞–∫ –ø—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ —Å–µ—Ä–≤–∏—Å–∞, –Ω–æ —ç—Ç–æ —É–∂–µ –Ω–µ –Ω–∞—à —Å–µ—Ä–≤–∏—Å. –Ø –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é, —á—Ç–æ —á–∏—Ç–∞—Ç–µ–ª—å —Å–ø—Ä–∞–≤–∏—Ç—Å—è —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π CMake. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –≤ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

## üî® **–®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞**

### **6.1 –ó–∞–ø—É—Å–∫–∞–µ–º turtlesim (—Ç–µ—Ä–º–∏–Ω–∞–ª ‚Ññ1)**
```bash
ros2 run turtlesim turtlesim_node
```

### **6.2 –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä (—Ç–µ—Ä–º–∏–Ω–∞–ª ‚Ññ2)**
```bash
ros2 run turtle_pose_service pose_server
```
–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: `–°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤. –ñ–¥—É –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ /get_pose`.

### **6.3 –ó–∞–ø—É—Å–∫–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª ‚Ññ3)**
```bash
ros2 run turtle_pose_service pose_client
```
–í—ã —É–≤–∏–¥–∏—Ç–µ –≤—ã–≤–æ–¥ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —á–µ—Ä–µ–ø–∞—à–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```
[INFO] [1740078123.123456] [pose_client]: –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏: x=5.54, y=5.54, theta=0.00
```

### **6.4 –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**
```bash
ros2 service list
```
–î–æ–ª–∂–µ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å `/get_pose`.

### **6.5 –í—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏**
```bash
ros2 service call /get_pose turtle_pose_service/srv/GetPose "{}"
```
–û—Ç–≤–µ—Ç –ø—Ä–∏–¥—ë—Ç –≤ –≤–∏–¥–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏.

---

## üéÆ **–®–∞–≥ 7: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è**

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –°–µ—Ä–≤–∏—Å —Å–ª—É—á–∞–π–Ω–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏**
–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å `RandomTeleport.srv` (–∑–∞–ø—Ä–æ—Å –ø—É—Å—Ç–æ–π, –æ—Ç–≤–µ—Ç ‚Äî –Ω–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã). –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–∫–Ω–∞ turtlesim (–æ—Ç 0 –¥–æ 11) –∏ –≤—ã–∑—ã–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å `/turtle1/teleport_absolute`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —á–µ—Ä–µ–ø–∞—à–∫—É. –ö–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –∏ —Å–æ–æ–±—â–∞–µ—Ç, –∫—É–¥–∞ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∞—Å—å —á–µ—Ä–µ–ø–∞—à–∫–∞.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞:** –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤—ã–∑–æ–≤–∞ `/turtle1/teleport_absolute`.

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –ú–Ω–æ–≥–æ—Å–µ—Ä–≤–∏—Å–Ω—ã–π —É–∑–µ–ª**
–û–±—ä–µ–¥–∏–Ω–∏—Ç–µ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ (`GetPose` –∏ `RandomTeleport`) –≤ –æ–¥–Ω–æ–º —É–∑–ª–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Ö —Ä–∞–±–æ—Ç—É.

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞ `pose_client` —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –ø–æ–≤—Ç–æ—Ä—è–ª –∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã –∏ –≤—ã–≤–æ–¥–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.

---

## üßπ **–®–∞–≥ 8: –û—á–∏—Å—Ç–∫–∞**
–ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —É–∑–ª—ã –Ω–∞–∂–∞—Ç–∏–µ–º **Ctrl+C** –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

---

## üìö **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Å–≤–æ–∏–ª–∏**

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ —Å–µ—Ä–≤–∏—Å–∞ (—Ñ–∞–π–ª .srv)**  
‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø–∞–∫–µ—Ç–∞**  
‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º –∏–∑ —Ç–æ–ø–∏–∫–∞**  
‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ —Å–µ—Ä–≤–∏—Å–∞**  
‚úÖ **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ç–æ–ø–∏–∫–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤**  
‚úÖ **–ó–∞–ø—É—Å–∫ –∏ –æ—Ç–ª–∞–¥–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ ROS‚ÄØ2**

---

## üîú **–ß—Ç–æ –¥–∞–ª—å—à–µ?**

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π (actions)** –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏).
2. **–†–∞–±–æ—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —É–∑–ª–∞** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏.
3. **–°–æ–∑–¥–∞–Ω–∏–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤** —Å –Ω–µ–ø—É—Å—Ç—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–¥–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏).
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –±–æ–ª—å—à–∏–µ –ø—Ä–æ–µ–∫—Ç—ã** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É–∑–ª–∞–º–∏.
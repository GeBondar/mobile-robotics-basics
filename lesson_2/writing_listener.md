# **–°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ Subscriber –¥–ª—è —á—Ç–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–ø–∞—à–∫–∏ –≤ ROS 2**

## üéØ **–¶–µ–ª—å**
–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —É–∑–µ–ª-–ø–æ–¥–ø–∏—Å—á–∏–∫ (subscriber) –Ω–∞ Python, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–ø–∞—à–∫–∏ –∏–∑ —Ç–æ–ø–∏–∫–∞ `/turtle1/pose` –≤ turtlesim –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö.

---

## üìã **–ß—Ç–æ –º—ã –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å**
1. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ROS 2 –ø–∞–∫–µ—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—ã–π)
2. –ù–∞–ø–∏—à–µ–º —É–∑–µ–ª-–ø–æ–¥–ø–∏—Å—á–∏–∫ –Ω–∞ Python
3. –†–µ–∞–ª–∏–∑—É–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
   - –ü—Ä–æ—Å—Ç–æ–π –≤—ã–≤–æ–¥ –ø–æ–∑–∏—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
   - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É–≥–ª–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–µ–≤–æ–π —Ç–æ—á–∫–∏

---

## üöÄ **–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ –ø–∞–∫–µ—Ç–∞**

### **1.1 –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞–∫–µ—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π)**
```bash
# –ï—Å–ª–∏ –ø–∞–∫–µ—Ç my_turtle_controller —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞)
cd ~/ros2_ws/src/my_turtle_controller/my_turtle_controller

# –ò–õ–ò —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç
ros2 pkg create my_turtle_subscriber \
  --build-type ament_python \
  --dependencies rclpy turtlesim
```

---

## üêç **–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —É–∑–ª–∞-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞**

### **2.1 –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª —Å —É–∑–ª–æ–º**
```bash
touch turtle_subscriber.py
chmod +x turtle_subscriber.py
```

### **2.2 –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
```bash
nano turtle_subscriber.py
```

### **2.3 –ö–æ–¥ —É–∑–ª–∞-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞ (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)**
```python
#!/usr/bin/env python3
"""
–£–∑–µ–ª-–ø–æ–¥–ø–∏—Å—á–∏–∫ –¥–ª—è —á—Ç–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–ø–∞—à–∫–∏ –≤ turtlesim.
"""

import rclpy
from rclpy.node import Node
from turtlesim.msg import Pose
import math

class TurtleSubscriber(Node):
    def __init__(self):
        super().__init__('turtle_subscriber')
        
        # –°–æ–∑–¥–∞—ë–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –¥–ª—è —Ç–æ–ø–∏–∫–∞ /turtle1/pose
        self.subscription = self.create_subscription(
            Pose,
            '/turtle1/pose',
            self.pose_callback,
            10
        )
        
        # –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
        self.subscription
        
        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
        self.last_pose = None
        self.total_distance = 0.0
        self.start_pose = None
        
        self.get_logger().info('–£–∑–µ–ª turtle_subscriber –∑–∞–ø—É—â–µ–Ω. –û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–ø–∞—à–∫–∏...')
    
    def pose_callback(self, msg):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–∑–∏—Ü–∏–µ–π —á–µ—Ä–µ–ø–∞—à–∫–∏"""
        # –ü—Ä–æ—Å—Ç–æ–π –≤—ã–≤–æ–¥ –ø–æ–∑–∏—Ü–∏–∏
        self.get_logger().info(
            f'–ü–æ–∑–∏—Ü–∏—è: x={msg.x:.2f}, y={msg.y:.2f}, Œ∏={msg.theta:.2f} —Ä–∞–¥'
        )
        
        # –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ —Å—Ç–∞—Ä—Ç–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é
        if self.start_pose is None:
            self.start_pose = msg
            self.get_logger().info(f'–°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è: x={msg.x:.2f}, y={msg.y:.2f}')
        
        # –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
        if self.last_pose is not None:
            distance = math.sqrt(
                (msg.x - self.last_pose.x)**2 + 
                (msg.y - self.last_pose.y)**2
            )
            self.total_distance += distance
            
            # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤—ã–≤–æ–¥–∏–º –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
            if int(self.total_distance * 10) % 10 == 0:
                self.get_logger().info(f'–ü—Ä–æ–π–¥–µ–Ω–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ: {self.total_distance:.2f} –µ–¥–∏–Ω–∏—Ü')
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        self.last_pose = msg

def main(args=None):
    rclpy.init(args=args)
    
    # –°–æ–∑–¥–∞—ë–º —É–∑–µ–ª
    turtle_subscriber = TurtleSubscriber()
    
    try:
        # –ó–∞–ø—É—Å–∫–∞–µ–º —É–∑–µ–ª
        rclpy.spin(turtle_subscriber)
    except KeyboardInterrupt:
        turtle_subscriber.get_logger().info('–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–∑–ª–∞...')
        
        # –í—ã–≤–æ–¥–∏–º –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        if turtle_subscriber.start_pose is not None and turtle_subscriber.last_pose is not None:
            final_distance = math.sqrt(
                (turtle_subscriber.last_pose.x - turtle_subscriber.start_pose.x)**2 + 
                (turtle_subscriber.last_pose.y - turtle_subscriber.start_pose.y)**2
            )
            turtle_subscriber.get_logger().info(
                f'–ò—Ç–æ–≥: –ø—Ä–æ–π–¥–µ–Ω–æ {turtle_subscriber.total_distance:.2f} –µ–¥–∏–Ω–∏—Ü, '
                f'—Å–º–µ—â–µ–Ω–∏–µ –æ—Ç —Å—Ç–∞—Ä—Ç–∞: {final_distance:.2f} –µ–¥–∏–Ω–∏—Ü'
            )
    finally:
        # –û—á–∏—Å—Ç–∫–∞
        turtle_subscriber.destroy_node()
        rclpy.shutdown()

if __name__ == '__main__':
    main()
```

---

## üì¶ **–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–∫–µ—Ç–∞**

### **3.1 –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª setup.py**
```bash
cd ~/ros2_ws/src/my_turtle_subscriber
nano setup.py
```

### **3.2 –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –≤ —Å–µ–∫—Ü–∏—é entry_points**
```python
entry_points={
    'console_scripts': [
        'turtle_subscriber = my_turtle_subscriber.turtle_subscriber:main',
    ],
},
```

### **3.3 –ü—Ä–æ–≤–µ—Ä—è–µ–º package.xml (–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)**
```xml
<depend>rclpy</depend>
<depend>turtlesim</depend>
```

---

## üî® **–®–∞–≥ 4: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫**

### **4.1 –°–æ–±–∏—Ä–∞–µ–º –ø–∞–∫–µ—Ç**
```bash
cd ~/ros2_ws
colcon build --packages-select my_turtle_subscriber
source install/setup.bash
```

### **4.2 –ó–∞–ø—É—Å–∫–∞–µ–º turtlesim (–≤ –ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)**
```bash
ros2 run turtlesim turtlesim_node
```

### **4.3 –ó–∞–ø—É—Å–∫–∞–µ–º publisher –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏ (–≤–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º publisher –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞ –∏–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π teleop
ros2 run turtlesim turtle_teleop_key
# –ò–õ–ò –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—à publisher:
ros2 run my_turtle_controller turtle_publisher
```

### **4.4 –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—à subscriber (–≤ —Ç—Ä–µ—Ç—å–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)**
```bash
ros2 run my_turtle_subscriber turtle_subscriber
```

---

## üéÆ **–®–∞–≥ 5: –£–ª—É—á—à–µ–Ω–∏—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**

### **5.1 –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π**
–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–æ–¥ –¥–ª—è –≤—ã–≤–æ–¥–∞ –ø–æ–∑–∏—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö:

```python
def pose_callback(self, msg):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π"""
    # –í—ã–≤–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ
    if (self.last_pose is None or 
        abs(msg.x - self.last_pose.x) > 0.1 or 
        abs(msg.y - self.last_pose.y) > 0.1):
        
        self.get_logger().info(
            f'–ü–æ–∑–∏—Ü–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å: x={msg.x:.2f}, y={msg.y:.2f}'
        )
    
    self.last_pose = msg
```

### **5.2 –†–µ–∞–ª–∏–∑—É–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–ª–∏**
```python
class GoalTrackingSubscriber(Node):
    def __init__(self, goal_x=5.0, goal_y=5.0):
        super().__init__('goal_tracking_subscriber')
        
        self.subscription = self.create_subscription(
            Pose,
            '/turtle1/pose',
            self.pose_callback,
            10
        )
        
        self.goal_x = goal_x
        self.goal_y = goal_y
        self.goal_reached = False
        self.goal_threshold = 0.5  # —Ä–∞–¥–∏—É—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏
        
        self.get_logger().info(f'–¶–µ–ª—å: ({goal_x}, {goal_y})')
    
    def pose_callback(self, msg):
        # –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–ª–∏
        distance_to_goal = math.sqrt(
            (msg.x - self.goal_x)**2 + 
            (msg.y - self.goal_y)**2
        )
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–∏
        if not self.goal_reached and distance_to_goal < self.goal_threshold:
            self.goal_reached = True
            self.get_logger().info('üéâ –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!')
        
        # –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –¥–æ —Ü–µ–ª–∏
        if not self.goal_reached:
            self.get_logger().info(
                f'–î–æ —Ü–µ–ª–∏: {distance_to_goal:.2f} –µ–¥–∏–Ω–∏—Ü, '
                f'—Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è: ({msg.x:.2f}, {msg.y:.2f})'
            )
```

### **5.3 –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏**
```python
import argparse

def main(args=None):
    rclpy.init(args=args)
    
    # –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    parser = argparse.ArgumentParser()
    parser.add_argument('--goal_x', type=float, default=5.0,
                       help='X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ü–µ–ª–∏')
    parser.add_argument('--goal_y', type=float, default=5.0,
                       help='Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ü–µ–ª–∏')
    parsed_args, _ = parser.parse_known_args()
    
    # –°–æ–∑–¥–∞—ë–º —É–∑–µ–ª —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    turtle_subscriber = GoalTrackingSubscriber(
        goal_x=parsed_args.goal_x,
        goal_y=parsed_args.goal_y
    )
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
```

---

## üß™ **–®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞**

### **6.1 –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–ø–∏–∫–æ–≤**
```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–ø–∏–∫–æ–≤
ros2 topic list

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–ø–∏–∫–µ /turtle1/pose
ros2 topic info /turtle1/pose

# –†—É—á–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ —Ç–æ–ø–∏–∫ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
ros2 topic pub /turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0}, angular: {z: 1.0}}"
```

### **6.2 –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
```bash
# –ó–∞–ø—É—Å–∫ rqt_plot –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
ros2 run rqt_plot rqt_plot
# –ó–∞—Ç–µ–º –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ: /turtle1/pose/x, /turtle1/pose/y
```

### **6.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–∑–ª–æ–≤**
```bash
# –°–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤
ros2 node list

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—à–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–µ
ros2 node info /turtle_subscriber
```

### **6.4 –ó–∞–ø–∏—Å—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
```bash
# –ó–∞–ø–∏—Å—å —Ç–æ–ø–∏–∫–∞ –≤ —Ñ–∞–π–ª
ros2 bag record /turtle1/pose

# –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
ros2 bag play <–∏–º—è_—Ñ–∞–π–ª–∞_bag>
```

---

## üìù **–®–∞–≥ 7: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è**

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –°–∫–æ—Ä–æ—Å—Ç—å –∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ —á–µ—Ä–µ–ø–∞—à–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏.

**–ü–æ–¥—Å–∫–∞–∑–∫–∞:**
```python
# –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–ª–∞—Å—Å
self.last_time = None

def pose_callback(self, msg):
    current_time = self.get_clock().now()
    
    if self.last_pose is not None and self.last_time is not None:
        dt = (current_time - self.last_time).nanoseconds / 1e9
        
        if dt > 0:
            vx = (msg.x - self.last_pose.x) / dt
            vy = (msg.y - self.last_pose.y) / dt
            speed = math.sqrt(vx**2 + vy**2)
            
            self.get_logger().info(f'–°–∫–æ—Ä–æ—Å—Ç—å: {speed:.2f} –µ–¥/—Å–µ–∫')
    
    self.last_pose = msg
    self.last_time = current_time
```

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏**
–°–æ–∑–¥–∞–π—Ç–µ —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–ø–∞—à–∫–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç –µ—ë –≤ –∫–æ–Ω—Ü–µ.

### **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**
–°–æ–∑–¥–∞–π—Ç–µ —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–º (—á–∏—Ç–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é) –∏ –∏–∑–¥–∞—Ç–µ–ª–µ–º (–ø—É–±–ª–∏–∫—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–≤–∏–∂–µ–Ω–∏—è) –¥–ª—è —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫ —Ü–µ–ª–∏.

---

## üßπ **–®–∞–≥ 8: –û—á–∏—Å—Ç–∫–∞**
–ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —É–∑–ª—ã –Ω–∞–∂–∞—Ç–∏–µ–º **Ctrl+C** –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

---

## üìö **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Å–≤–æ–∏–ª–∏**

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ ROS 2 —É–∑–ª–∞-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –Ω–∞ Python**  
‚úÖ **–†–∞–±–æ—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Ç–∏–ø–∞ Pose**  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ callback-—Ñ—É–Ω–∫—Ü–∏–π**  
‚úÖ **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ —Å–∫–æ—Ä–æ—Å—Ç–µ–π**  
‚úÖ **–†–∞–±–æ—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏**  
‚úÖ **–û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤**  

---

## üîú **–ß—Ç–æ –¥–∞–ª—å—à–µ?**

1. **–°–æ–∑–¥–∞–Ω–∏–µ —É–∑–ª–∞ —Å –¥–≤—É–º—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏** –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–ø–∏–∫–æ–≤
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tf2** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–∑–¥–∞—Ç–µ–ª—è –∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞** –≤ –æ–¥–Ω–æ–º —É–∑–ª–µ (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é)
4. **–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏** –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
5. **–°–æ–∑–¥–∞–Ω–∏–µ launch-—Ñ–∞–π–ª–æ–≤** –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–æ–≤

---

## üí° **–°–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤**

1. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å callback-—Ñ—É–Ω–∫—Ü–∏–π:** –ù–µ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –¥–æ–ª–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ callback, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π
3. **–ü–∞–º—è—Ç—å:** –°–ª–µ–¥–∏—Ç–µ –∑–∞ —É—Ç–µ—á–∫–∞–º–∏ –ø–∞–º—è—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –¥–æ–ª–≥–æ–π —Ä–∞–±–æ—Ç–µ
4. **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ QoS (Quality of Service) –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —á–∞—Å—Ç–æ—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–≤ –∏–ª–∏ –∑–∞–ø–∏—Å—è–º–∏ bag-—Ñ–∞–π–ª–æ–≤